
function textSlides(pixels, img_width, img_height){

        //var img_width = 150;
        //var img_height =150;    

        var canvas = document.getElementById('textplayer');
        var width = canvas.scrollWidth;
        var height = canvas.scrollHeight;
        var ctx = canvas.getContext('2d');

        var LETTER_SPACE=1;
        var LETTER_HEIGHT=10;
        var LETTER_WIDTH=5;
        var STEP_HEIGHT=Math.floor(height/LETTER_HEIGHT);

        var alphabet = " #,ABCÇDEFGĞHIİJKLMNOÖPRSŞTUÜVYZ";

        var arr = [0,1,0,12,3,23,14,16,3,24,13,19,0,1,0,14,30,14,0,16,14,0,29,3,23,24,13,19,0,1,0,10,28,17,28,18,24,8,18,8,16,0,24,3,19,3,0,6,20,20,16,0,30,3,16,13,25,13,30,20,23,0,1,1,0,14,17,16,19,27,23,0,1,1,0];

        var m="";
       // var aa = "" ;
       // for(var i=0;i<m.length;i++){
       //     console.log(alphabet.indexOf(m.charAt(i)),m.charAt(i));
       //     aa += alphabet.indexOf(m.charAt(i))+",";
       // }
       // console.log(aa);
        
        var msg=m.toUpperCase();
        var nLetter = arr.length;
        var MSG_SPACE=5;
        var MSG_LENGTH = (LETTER_WIDTH+LETTER_SPACE)*nLetter+MSG_SPACE;

        var index=0; 
        var j=0;
        var let_ind=0;
        var let_ind_x=0;
        var letter;
        if (canvas.getContext) {
        var timeIntTxt = setInterval(function(){

            if(index >= 0 && index<MSG_LENGTH){
                let_ind = Math.floor(index / (LETTER_WIDTH+LETTER_SPACE));
                let_ind_x = index % (LETTER_WIDTH+LETTER_SPACE);
                letter = charMap[alphabet.charAt(arr[let_ind])]; 
                for(var i=0;i<LETTER_HEIGHT;i++){
                    if(nLetter> let_ind && LETTER_WIDTH > let_ind_x && letter[i][let_ind_x] == 1){
                        ctx.fillStyle = arr[let_ind]==1? 'rgb(254, 37, 49)' : 'rgb(176, 57, 149)';
                    } else{
                        ctx.fillStyle = 'rgb(255,255,255)';
                    }
                    ctx.fillRect(0, i*STEP_HEIGHT, width, STEP_HEIGHT);
                }
            } else if(index>=MSG_LENGTH && index<MSG_LENGTH+img_width ){
                j = (MSG_LENGTH+img_width - index)*4;
                for (var i = 0; i < img_height; i++) {
                    var r = pixels[i * img_width * 4 + j];
                    var g = pixels[i * img_width * 4 + j + 1];
                    var b = pixels[i * img_width * 4 + j + 2];
                    var a = pixels[i * img_width * 4 + j + 3];
                    ctx.fillStyle = 'rgb('+r+', '+g+', '+b+')';
                    ctx.fillRect(0, i, width, i);
                }
                index++;
                index++;
                index++;

            } else {
                index=0;
            }

            index++;
        },70);

        } else {
            console.alert("Unsupported Feature!");
        }

}

var timeInt;
document.addEventListener("DOMContentLoaded", function(){
    var img = document.getElementById('photo');
    var img_canvas = document.createElement('canvas');
    img.addEventListener('load', function(){
        if(img.complete){
            img_canvas.width = img.width;
            img_canvas.height = img.height;
            var img_ctx = img_canvas.getContext("2d");
            img_ctx.drawImage(img, 0, 0, img.width, img.height);
            
            const imageData = img_ctx.getImageData(0, 0, img.width, img.height);
            const data = imageData.data;

            textSlides(data, img.width, img.height);
            
        }
    });
});

var charMap =[];

charMap["#"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,0,0,0,0],
    [0,1,0,1,0],
    [1,1,1,1,1],
    [1,1,1,1,1],
    [0,1,1,1,0],
    [0,0,1,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];


charMap[","] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,0,0,0,0],
    [0,0,0,0,0],
    [0,0,1,1,0],
    [0,0,1,1,0],
    [0,0,0,1,0],
    [0,0,1,0,0],
	[0,1,0,0,0],
	[0,0,0,0,0]
];


charMap[" "] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,0,0,0,0],
    [0,0,0,0,0],
    [0,0,0,0,0],
    [0,0,0,0,0],
    [0,0,0,0,0],
    [0,0,0,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["A"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,0,1,0,0],
    [0,1,0,1,0],
    [1,0,0,0,1],
    [1,1,1,1,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["B"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,1,1,1,0],
    [1,0,0,0,1],
    [1,1,1,1,0],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,1,1,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["C"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,1,1,1,1],
    [1,1,0,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [0,1,1,1,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["Ç"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
	[0,1,1,1,1],
    [1,1,0,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [0,1,1,1,1],
    [0,0,0,1,0],
	[0,0,1,0,0]
];

charMap["D"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,1,1,1,0],
    [1,0,0,1,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,1,1],
    [1,1,1,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["E"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,1,1,1,1],
    [1,0,0,0,0],
    [1,1,1,1,1],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [1,1,1,1,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["F"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,1,1,1,1],
    [1,0,0,0,0],
    [1,1,1,1,1],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["G"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,1,1,1,0],
    [1,0,0,0,1],
    [1,0,0,0,0],
    [1,0,1,1,0],
    [1,0,0,0,1],
    [0,1,1,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["Ğ"] =[
	[0,1,1,1,0],
	[0,0,0,0,0],
    [0,1,1,1,0],
    [1,0,0,0,1],
    [1,0,0,0,0],
    [1,0,1,1,0],
    [1,0,0,0,1],
    [0,1,1,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["H"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,1,1,1,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["I"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,1,1,1,1],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [1,1,1,1,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["İ"] =[
	[0,1,1,1,0],
	[0,0,0,0,0],
    [1,1,1,1,1],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [1,1,1,1,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["J"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,0,1,1,1],
    [0,0,0,1,0],
    [0,0,0,1,0],
    [0,0,0,1,0],
    [1,0,0,1,0],
    [0,1,1,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["K"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [1,0,0,1,0],
    [1,1,1,0,0],
    [1,0,1,0,0],
    [1,0,0,1,0],
    [1,0,0,0,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["L"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
    [1,1,1,1,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["M"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [1,1,0,1,1],
    [1,0,1,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["N"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [1,1,0,0,1],
    [1,0,1,0,1],
    [1,0,1,0,1],
    [1,0,0,1,1],
    [1,0,0,0,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["O"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,1,1,1,0],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [0,1,1,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["Ö"] =[
	[0,1,0,1,0],
	[0,0,0,0,0],
    [0,1,1,1,0],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [0,1,1,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["P"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,1,1,1,0],
    [1,0,0,0,1],
    [1,0,0,1,0],
    [1,1,1,0,0],
    [1,0,0,0,0],
    [1,0,0,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["Q"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,1,1,1,0],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,1,0,1],
    [1,0,0,1,1],
    [0,1,1,1,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["R"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,1,1,1,0],
    [1,0,0,0,1],
    [1,1,0,1,0],
    [1,1,1,0,0],
    [1,0,1,1,0],
    [1,0,0,0,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["S"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [0,1,1,1,0],
    [1,0,0,0,1],
    [0,1,1,0,0],
    [0,0,0,1,0],
    [1,0,0,0,1],
    [0,1,1,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["Ş"] =[
	[0,0,0,0,0],
    [0,0,0,0,0],
	[0,1,1,1,0],
    [1,0,0,0,1],
    [0,1,1,0,0],
    [0,0,0,1,0],
    [1,0,0,0,1],
    [0,1,1,1,0],
	[0,0,1,0,0],
    [0,1,0,0,0]
];


charMap["T"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,1,1,1,1],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["U"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [0,1,1,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["Ü"] =[
	[0,1,0,1,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [0,1,1,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];


charMap["V"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [0,1,0,1,0],
    [0,1,0,1,0],
    [0,1,0,1,0],
    [0,0,1,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["W"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,0,0,1],
    [1,0,1,0,1],
    [1,0,1,0,1],
    [0,1,0,1,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["X"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [0,1,0,1,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,1,0,1,0],
    [1,0,0,0,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["Y"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,0,0,0,1],
    [0,1,0,1,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
	[0,0,0,0,0],
	[0,0,0,0,0]
];

charMap["Z"] =[
	[0,0,0,0,0],
	[0,0,0,0,0],
    [1,1,1,1,1],
    [0,0,0,1,0],
    [0,0,1,0,0],
    [0,0,1,0,0],
    [0,1,0,0,0],
    [1,1,1,1,1],
	[0,0,0,0,0],
	[0,0,0,0,0]
];
